import React, { useState, useRef, useEffect, useContext } from 'react'
import styled from 'styled-components'
import Fade from 'react-reveal/Fade'
import Flag from './Flag'
import { getWidthContext } from '../../../../utils/getWidthScreen'
const ContainerMap = styled.div`
  position: relative;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-repeat: no-repeat;
  background-size: 100% 100%;
  background-position: 100% 0%;
  object-fit: cover;
  transition: background-image 1s ease-in-out;
  .cls-1{fill:none;}.cls-2{clip-path:url(#clip-path);}.cls-3{fill:#162332;}.cls-4{fill:#21274a;}.cls-5{fill:#2f4968;}
  /* background-image: url(${(props) => props.map === 'BANGKOK' ? '/static/images/Map/map-bkk.png' : '/static/images/Map/map-cnx.png'}); */
`

const mapSVG = (elem) => (
  <svg xmlns="http://www.w3.org/2000/svg"
    xmlnsXlink="http://www.w3.org/1999/xlink" viewBox="0 0 288 150">
    <defs>
      <clipPath id="clip-path">
        <rect class="cls-1" width="288" height="150" />
      </clipPath>
    </defs>
    <title>BKK - Desktop</title>
    <g id="Layer_2" data-name="Layer 2">
      <g class="cls-2">
        <rect class="cls-3" y="0.15" width="288" height="150" />
        <path class="cls-4" d="M50.31,47.05h-.12L25.46,45.64a2.07,2.07,0,1,1,.24-4.14l24.74,1.41a2.07,2.07,0,0,1-.12,4.14Z" />
        <path class="cls-4" d="M68.81,80.45h0L18.62,80-2.16,73.64A2.07,2.07,0,0,1-3.53,71,2.07,2.07,0,0,1-.94,69.68l20.2,6.23,49.56.4a2.07,2.07,0,0,1,0,4.15Z" />
        <path class="cls-4" d="M104.82,96.12h-.12c-.25,0-24.61-1.41-30.39-1.81-3-.21-5.33-.69-6.78-2.38s-1.58-4-1.28-7.49c.5-5.76,5.28-54.61,5.33-55.1a2.07,2.07,0,1,1,4.13.4c0,.49-4.83,49.32-5.33,55.06-.15,1.73-.25,3.8.3,4.44s3.1.89,3.91.94c5.75.4,30.09,1.79,30.34,1.8a2.07,2.07,0,0,1-.12,4.14Z" />
        <path class="cls-4" d="M98.4,155.91h-.22a2.07,2.07,0,0,1-1.85-2.28l11.85-114.4a2.07,2.07,0,1,1,4.12.43l-11.85,114.4A2.07,2.07,0,0,1,98.4,155.91Z" />
        <path class="cls-4" d="M117.51,155a2.07,2.07,0,0,1-2.06-1.91l-.8-9.9L125.52,28.4a2.07,2.07,0,1,1,4.13.39L118.81,143.26l.77,9.54a2.07,2.07,0,0,1-1.9,2.23Z" />
        <path class="cls-4" d="M164.41,94.21a9.3,9.3,0,0,1-1.27-.09c-4.1-.57-5.54-1.35-6-1.66l2.44-3.35-.12-.08a14.36,14.36,0,0,0,4.21,1c3,.41,3.82-1.9,4.05-3.32.17-1,.23-1.34.28-1.64.09-.52.16-.94.73-4.39.6-3.68-.18-4.58-1.36-5.94-.27-.31-.53-.62-.8-1a8,8,0,0,0-5.44-3.13c-3.18-.55-25.53-3.76-25.75-3.79a2.07,2.07,0,1,1,.59-4.1c.92.13,22.63,3.25,25.87,3.81a12,12,0,0,1,8,4.67c.21.28.44.53.65.78,1.83,2.11,3.17,4.14,2.32,9.33-.57,3.48-.64,3.9-.73,4.43-.05.3-.11.63-.27,1.61C171.26,90.91,168.75,94.21,164.41,94.21Z" />
        <path class="cls-4" d="M152,159.73h-.2a2.07,2.07,0,0,1-1.87-2.26l8.41-89.29a2.07,2.07,0,1,1,4.13.39l-8.41,89.29A2.07,2.07,0,0,1,152,159.73Z" />
        <path class="cls-4" d="M152.83,150.9l-.32,0-36.1-5.59a2.07,2.07,0,1,1,.63-4.1l36.1,5.59a2.07,2.07,0,0,1-.31,4.12Z" />
        <path class="cls-4" d="M185.73,146.76h-.25l-32.36-3.91a2.07,2.07,0,0,1,.5-4.12L186,142.62a2.07,2.07,0,0,1-.25,4.13Z" />
        <path class="cls-4" d="M27.08,156.08l-.34,0A2.07,2.07,0,0,1,25,153.67c.08-.49,8.12-49.4,8.76-53.28a6.57,6.57,0,0,1,2.56-4.67c2-1.34,4.29-.84,6.15-.43l2.38.51c2,.43,4,.87,5.85,1.3,4.48,1.06,4,4.46,3.65,7.46-.46,3.55-7.1,46.44-7.39,48.26a2.07,2.07,0,0,1-4.1-.63c.07-.45,6.92-44.66,7.37-48.16a13.19,13.19,0,0,0,.17-2.68,3.27,3.27,0,0,0-.66-.21C48,100.71,46,100.28,44,99.86l-2.4-.52c-1.08-.24-2.42-.53-2.93-.19a3.1,3.1,0,0,0-.8,1.92c-.65,3.87-8.68,52.78-8.76,53.27A2.07,2.07,0,0,1,27.08,156.08Z" />
        <path class="cls-4" d="M32.79,121.32a2.11,2.11,0,0,1-.47-.05l-20.86-4.85a2.07,2.07,0,1,1,.94-4l20.86,4.85a2.07,2.07,0,0,1-.47,4.09Z" />
        <path class="cls-4" d="M29.27,142.71a2.06,2.06,0,0,1-.73-.13l-42.42-16a2.07,2.07,0,0,1-1.21-2.67,2.07,2.07,0,0,1,2.67-1.21L30,138.7a2.07,2.07,0,0,1-.73,4Z" />
        <path class="cls-4" d="M93.53,23.9a2.08,2.08,0,0,1-2-2.52L97-3.37a2.07,2.07,0,0,1,2.47-1.58A2.07,2.07,0,0,1,101-2.48L95.56,22.27A2.07,2.07,0,0,1,93.53,23.9Z" />
        <path class="cls-4" d="M91.61,95.36h-.15a2.07,2.07,0,0,1-1.92-2.21L94.2,27.52a2.07,2.07,0,0,1,4.14.29L93.68,93.43A2.07,2.07,0,0,1,91.61,95.36Z" />
        <path class="cls-4" d="M238.72,153.43l-4-.93s7.13-31,8.79-38.12c1.49-6.38,1.49-6.9-3.21-8.3-6.06-1.8-45-13.2-45.43-13.31a2.07,2.07,0,1,1,1.16-4c.39.11,39.37,11.52,45.44,13.32,7.75,2.3,7.8,5.79,6.07,13.21C245.85,122.44,238.72,153.43,238.72,153.43Z" />
        <path class="cls-4" d="M274.51,155a2.08,2.08,0,0,1-2-2.61l16.58-62.19a2.07,2.07,0,1,1,4,1.07L276.51,153.5A2.07,2.07,0,0,1,274.51,155Z" />
        <path class="cls-4" d="M286.78,155a2.12,2.12,0,0,1-.46-.05,2.07,2.07,0,0,1-1.57-2.48l4.31-19.09a2.07,2.07,0,1,1,4,.91l-4.31,19.09A2.08,2.08,0,0,1,286.78,155Z" />
        <path class="cls-4" d="M281.61,128.42a2.09,2.09,0,0,1-.54-.07L222.73,112.7a2.07,2.07,0,0,1,1.07-4l58.34,15.65a2.07,2.07,0,0,1-.54,4.08Z" />
        <path class="cls-4" d="M217.47,155h-.14a2.07,2.07,0,0,1-1.93-2.21l1.9-28.4c.61-2.39,14.93-58.49,16.08-62.6,1.06-3.77,3.9-5.08,8.46-3.89l.45.11c1.5.33,38.05,10.31,42.22,11.44a2.07,2.07,0,1,1-1.09,4c-16.27-4.44-40.89-11.14-42-11.39L240.8,62c-2.55-.66-3-.37-3.43,1-1.11,4-15.08,58.68-16,62.32l-1.83,27.83A2.07,2.07,0,0,1,217.47,155Z" />
        <path class="cls-4" d="M269,125a2.08,2.08,0,0,1-2-2.66l23.29-79.43a2.07,2.07,0,1,1,4,1.17l-23.29,79.43A2.08,2.08,0,0,1,269,125Z" />
        <path class="cls-4" d="M277.75,95a2.07,2.07,0,0,1-.64-.1c-.2-.06-19.55-6.35-22.42-7.25-1.74-.54-6.35-2-5.19-7.61.64-3.1,3.66-16.3,3.79-16.86a2.07,2.07,0,1,1,4,.92c0,.14-3.14,13.72-3.77,16.77-.3,1.45-.27,2,2.37,2.82,2.89.91,21.66,7,22.46,7.26a2.07,2.07,0,0,1-.64,4Z" />
        <path class="cls-4" d="M155.21,19.84a2.08,2.08,0,0,1-2-2.43l2.63-15a2.07,2.07,0,1,1,4.08.72l-2.63,15A2.07,2.07,0,0,1,155.21,19.84Z" />
        <path class="cls-4" d="M164.47,16.06l-.27,0a2.07,2.07,0,0,1-1.79-2.32l1.94-15a2.07,2.07,0,0,1,2.32-1.79,2.07,2.07,0,0,1,1.79,2.32l-1.94,15A2.07,2.07,0,0,1,164.47,16.06Z" />
        <path class="cls-4" d="M187.39,129.25l-.32,0c-.25,0-6.2-1-8.58-1.43-3.44-.69-5-2.76-4.58-6.17.18-1.55.53-4.72.82-7.45.16-1.47.3-2.81.4-3.71.42-3.74,2.61-5.51,6.33-5.12,2.63.28,9.56,1.19,9.85,1.23a2.07,2.07,0,1,1-.54,4.11c-.07,0-7.17-.94-9.75-1.22-1.44-.15-1.61,0-1.77,1.45-.1.89-.24,2.23-.4,3.69-.3,2.75-.64,5.94-.83,7.5-.14,1.17-.16,1.33,1.27,1.61,2.29.46,8.33,1.39,8.39,1.4a2.07,2.07,0,0,1-.31,4.12Z" />
        <path class="cls-4" d="M291.09,24.28h-.23c-1.53-.1-37.65-2.53-56.84-5.46S117.13-.7,116.15-.87a3.46,3.46,0,0,1-2.83-4,3.45,3.45,0,0,1,4-2.83c1,.17,98.75,16.76,117.76,19.66s55.88,5.37,56.25,5.39a3.46,3.46,0,0,1-.23,6.9Z" />
        <path class="cls-5" d="M293.54,59c-5.77-1.21-11.36-2.56-17.27-4C257,50.41,237,45.61,211.45,46H211l-.48-.06c-17.75-2.23-33.37-6.09-47.16-9.5-13-3.22-24.24-6-34.26-6.72-18.8-1.29-47.27,1.46-72.39,3.87-9.34.9-18.16,1.75-25.64,2.3C14,37.14,6.86,36.2-6.1,34.5c-5-.66-10.65-1.4-18.18-2.2l1.45-13.75c7.71.81,13.71,1.6,18.54,2.24C8.15,22.43,14.39,23.25,30,22.1c7.33-.54,16.07-1.38,25.33-2.27C81,17.36,110.08,14.56,130,15.93c11.23.81,23,3.72,36.61,7.09,13.29,3.29,28.33,7,45.09,9.15,27.06-.36,48.68,4.86,67.77,9.46,5.82,1.4,11.31,2.73,16.88,3.9Z" />
        <path class="cls-4" d="M3.55,160a2.07,2.07,0,0,1-2-2.47l30.63-159a2.07,2.07,0,0,1,2.43-1.64A2.07,2.07,0,0,1,36.22-.72l-30.63,159A2.07,2.07,0,0,1,3.55,160Z" />
        <path class="cls-4" d="M184.62,159.27l-.37,0a3.46,3.46,0,0,1-3.07-3.8l3.24-30.33L211.88-3.64A3.46,3.46,0,0,1,216-6.3a3.46,3.46,0,0,1,2.66,4.1L191.22,126.38l-3.16,29.8A3.46,3.46,0,0,1,184.62,159.27Z" />
        <path class="cls-4" d="M70.87,166.34l-.29,0A2.07,2.07,0,0,1,68.81,164L79,92.39a2.07,2.07,0,1,1,4.11.58L72.92,164.56A2.07,2.07,0,0,1,70.87,166.34Z" />
      </g>
    </g>
    <elem cx={500}
                cy={500}/>
  </svg>
)

const Map = (props): React.FC => {
  const ref = useRef(null)
  const useScreen = useContext(getWidthContext)
  const [usePosition, setPosition] = useState({ x: 0, y: 0 })
  const [useMapOut, setMapOut] = useState('')
  const { useMap, setModal } = props
  useEffect(() => {
    return () => {
      // cal position of flag
      var x = ref.current.getBoundingClientRect().width
      var y = ref.current.getBoundingClientRect().height
      setPosition({ x: x * (5 / 10), y: y * (1 / 4) })
    }
  }, [useScreen, ref.current])
  const { map } = props
  return (
    <>

      <ContainerMap {...props}>
        {mapSVG(<Flag
          name="Nextzy Technologies"
          usePosition={usePosition}
          onClick={() => setModal({ visible: true, map: map, isShowMap: true })}
        />)}
      </ContainerMap>

    </>
  )
}

export default Map




